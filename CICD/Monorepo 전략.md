
[Why Google Stores Billions of Lines of Code in a Single Repository](https://dl.acm.org/doi/pdf/10.1145/2854146)

Trunk-based development


### 모노레포(Monorepo) 개념
모노레포(Monorepo)는 하나의 코드베이스에서 여러 프로젝트를 함께 관리하는 방식. 
모노레포는 여러 개의 패키지, 라이브러리, 애플리케이션 등을 하나의 저장소(repository)에서 관리 한다.

### 모노레포의 장점
1. **코드 재사용**: 공통된 코드나 라이브러리를 여러 프로젝트에서 쉽게 재사용할 수 있다.
2. **통합된 빌드 및 테스트**: 모든 프로젝트에 대한 빌드 및 테스트를 한 곳에서 수행할 수 있어 일관성을 유지할 수 있다.
3. **종속성 관리**: 프로젝트 간의 종속성을 쉽게 관리하고 업데이트할 수 있다.
4. **코드 리뷰 및 협업**: 코드 리뷰를 통합해서 관리할 수 있으며, 팀 간의 협업이 용이다.

### 모노레포의 단점
1. **빌드 시간**: 저장소의 크기가 커지면 커지는 만큼 빌드 시간이 길어질 수 있다. -> 의존성을 최대한 분리하여 정말 필요한 의존성만 사용하도록 하는게 좋을것 같다
2. **저장소 크기**: 여러 프로젝트의 코드와 이력이 하나의 저장소에 모여 있어 저장소의 크기가 크게 될 수 있다.

### 모노레포에 적용할 수 있는 Git 브랜치 전략

1. **Main-Feature-Branch 전략**
    - `main` 브랜치에서 기능 또는 버그 수정을 위한 feature 브랜치를 생성
    - 기능 개발이 완료되면, 코드 리뷰 후 `main` 브랜치에 병합

2. **Gitflow 전략**    
    - `develop`, `feature`, `release`, `hotfix`, `master` 브랜치를 사용하는 방법
    - `develop` 브랜치에서 개발을 진행하고, 기능 개발을 위해 `feature` 브랜치를 분기
    - 기능이 완료되면 `develop` 브랜치에 병합하고, 배포 준비가 되면 `release` 브랜치를 생성
    - 배포 후에는 `master` 브랜치와 `develop` 브랜치에 병합
    - 단점
	    - 각 `feature` 브랜치가 오래 유지된다. 서로 다른 `feature` 브랜치에서 동시에 작업하다보면 동시에 수정해야 하는 부분이 생기는데, feature가 커지면 커질수록 Conflict가 나는 범위가 커지고 해결하기 힘들어진다.
	    - `feature` 브랜치가 커지면 코드리뷰 하기 힘들어진다. 최대한 자세히 리뷰하려 해도 범위가 너무 크다면 작업자가 아닌 이상 완전 세세하게 리뷰하기 힘들어짐..

3. **Trunk Based Development 전략** 
    - 모든 개발이 `main` 브랜치에서 진행
    - 짧은 주기로 `main` 브랜치에 병합하며, 필요한 경우 feature toggles을 사용하여 기능을 숨길 수 있습니다.
    - `main` 브랜치 하나만 운영
	    - 신규 feature는 바로 `main` 에 커밋하거나 `feature` 브랜치에서 1~2일 내로 짧은 주기로 Merge 해야 함